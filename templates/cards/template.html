<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>{{ plugin_name }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/ed38ca7e1a.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.3/Sortable.min.js"></script>
    <link rel="icon" href="data:image/svg+xml;base64,{% include 'cards/favicon.base64' %}" type="image/svg+xml">
    <style>
        {% include 'cards/style.css' %}
    </style>
</head>

<body>
    <img src="{{ plugin_url }}/fake.jpg" />
    <div class="container-fluid mt-4">
        <div class="row">
            <h1 class="text-uppercase text-center text-color-secondary">My cards</h1>
            <div class="d-flex justify-content-center mb-3">
                <button id="edit_view_button" class="btn">
                    <i class="fa-regular fa-2xl fa-circle-xmark add_icon"></i>
                </button>
            </div>
        </div>

        <div id="custom_view" class="row">
        </div>
        <div id="available_cards" class="row visibility-hidden">
            {% if general_info.external_ip %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="external_ip">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="card-title text-uppercase">external ip</h6>
                            <button type="button" class="btn" onclick="toggleCard('external_ip')">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div class="card-body d-flex align-items-center">
                            <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ general_info.external_ip }}</span>
                        </div>
                        <i class="fa-solid fa-network-wired icon-container"></i>
                    </div>
                </div>
            {% endif %}
            {% if general_info.hostname %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="hostname">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="card-title text-uppercase">hostname</h6>
                            <button type="button" class="btn" onclick="toggleCard('hostname')">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div class="card-body d-flex align-items-center">
                            <div class="card-inner">
                                <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ general_info.hostname }}</span>
                            </div>
                        </div>
                        <i class="fa-solid fa-server icon-container"></i>
                    </div>
                </div>
            {% endif %}
            {% if general_info.node_cpu_usage %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="node_cpu_usage">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="card-title text-uppercase">node cpu usage</h6>
                            <button type="button" class="btn" onclick="toggleCard('node_cpu_usage')">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div class="card-body d-flex align-items-center">
                            <div class="card-inner">
                                <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ general_info.node_cpu_usage }}%</span>
                            </div>
                        </div>
                        <i class="fa-solid fa-microchip icon-container"></i>
                    </div>
                </div>
            {% endif %}
            {% if general_info.node_memory_usage %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="node_memory_usage">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="card-title text-uppercase">node memory usage</h6>
                            <button type="button" class="btn" onclick="toggleCard('node_memory_usage')" aria-label="Close">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div class="card-body d-flex align-items-center">
                            <div class="card-inner">
                                <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ general_info.node_memory_usage }} MB</span>
                            </div>
                        </div>
                        <i class="fa-solid fa-memory icon-container"></i>
                    </div>
                </div>
            {% endif %}
            {% if general_info.node_uptime %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="node_uptime">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="card-title text-uppercase">node uptime</h6>
                            <button type="button" class="btn" onclick="toggleCard('node_uptime')" aria-label="Close">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div class="card-body d-flex align-items-center">
                            <div class="card-inner">
                                <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ general_info.node_uptime }}</span>
                            </div>
                        </div>
                        <i class="fa-solid fa-clock icon-container"></i>
                    </div>
                </div>
            {% endif %}
            {% if general_info.system_uptime %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="system_uptime">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="card-title text-uppercase">system uptime</h6>
                            <button type="button" class="btn" onclick="toggleCard('system_uptime')" aria-label="Close">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div class="card-body d-flex align-items-center">
                            <div class="card-inner">
                                <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ general_info.system_uptime }}</span>
                            </div>
                        </div>
                        <i class="fa-solid fa-clock icon-container"></i>
                    </div>
                </div>
            {% endif %}
            {% if general_info.node_version %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="node_version">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="card-title text-uppercase">node version</h6>
                            <button type="button" class="btn" onclick="toggleCard('node_version')">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div class="card-body d-flex align-items-center">
                            <div class="card-inner">
                                <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ general_info.node_version }}</span>
                            </div>
                        </div>
                        <i class="fa-solid fa-code-compare icon-container"></i>
                    </div>
                </div>
            {% endif %}
            {% if general_info.latest_node_version %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="latest_node_version">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="card-title text-uppercase">latest node version</h6>
                            <button type="button" class="btn" onclick="toggleCard('latest_node_version')">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div class="card-body d-flex align-items-center">
                            <div class="card-inner">
                                <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ general_info.latest_node_version }}</span>
                            </div>
                        </div>
                        <i class="fa-solid fa-code-compare icon-container"></i>
                    </div>
                </div>
            {% endif %}
            {% if network_info %}
                {% for network_name, network in network_info.items() %}
                {% if "backbone" in network_name | lower %}
                    {% set network_name = "BB" %}
                {% elif "kelvpn" in network_name | lower %}
                    {% set network_name = "KV" %}
                {% endif %}
                {% if network.node_data.info %}
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="total_network_weight_{{ network_name }}">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> Total network weight</h6>
                                <button type="button" class="btn" onclick="toggleCard('total_network_weight_{{ network_name }}')">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                            </div>
                            <div class="card-body d-flex align-items-center">
                                <div class="card-inner">
                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.node_data.info.total_weight }}</span>
                                </div>
                            </div>
                            <i class="fa-solid fa-weight-scale icon-container"></i>
                        </div>
                    </div>
                {% endif %}
                    {% if network.node_data.nodes %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="top_15_nodes_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> Top 15 nodes</h6>
                                    <button type="button" class="btn" onclick="toggleCard('top_15_nodes_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <canvas id="weightChart_{{ network_name }}"></canvas>
                                </div>
                            </div>
                        </div>
                        {% for node in network.node_data.nodes %}
                            {% if node.is_my_node %}
                                {% if node.pkey_hash %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="pkey_hash_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> Pkey Hash</h6>
                                                <button type="button" class="btn" onclick="toggleCard('pkey_hash_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ node.pkey_hash }}</span>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-key icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if node.tx_hash %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="tx_hash_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> TX Hash</h6>
                                                <button type="button" class="btn" onclick="toggleCard('tx_hash_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ node.tx_hash }}</span>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-hashtag icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if node.sovereign_addr != "null" %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="sovereign_addr_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> sovereign address</h6>
                                                <button type="button" class="btn" onclick="toggleCard('sovereign_addr_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ node.sovereign_addr }}</span>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-wallet icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if node.sovereign_tax | float > 0.0 %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="sovereign_tax_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> sovereign tax</h6>
                                                <button type="button" class="btn" onclick="toggleCard('sovereign_tax_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ node.sovereign_tax }}%</span>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-percent icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if node.active %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="node_active_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> node active</h6>
                                                <button type="button" class="btn" onclick="toggleCard('node_active_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">
                                                        {{ "True" if node.active == "true" else "False" }}
                                                    </span>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-chart-line icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if node.stake_value %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="node_stake_value_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> node stake value</h6>
                                                <button type="button" class="btn" onclick="toggleCard('node_stake_value_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ node.stake_value }}</span>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-dollar-sign icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if node.effective_value %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="node_effective_value_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> node effective value</h6>
                                                <button type="button" class="btn" onclick="toggleCard('node_effective_value_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ node.effective_value }}</span>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-dollar-sign icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if node.related_weight %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="node_related_weight_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> node related weight</h6>
                                                <button type="button" class="btn" onclick="toggleCard('node_related_weight_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ node.related_weight }}</span>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-weight-scale icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if network.node_data.info.active_nodes_count > 0 %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="active_nodes_count_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> active nodes</h6>
                                                <button type="button" class="btn" onclick="toggleCard('active_nodes_count_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.node_data.info.active_nodes_count }}</span>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-weight-scale icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    {% if network.state %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="state_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> state</h6>
                                    <button type="button" class="btn" onclick="toggleCard('state_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.state }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-network-wired icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.target_state %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="target_state_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> target state</h6>
                                    <button type="button" class="btn" onclick="toggleCard('target_state_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.target_state }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-network-wired icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.signed_blocks %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="signed_blocks_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> signed blocks</h6>
                                    <button type="button" class="btn" onclick="toggleCard('signed_blocks_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.signed_blocks }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-file-signature icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.signed_blocks_today %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="signed_blocks_today_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> signed blocks today</h6>
                                    <button type="button" class="btn" onclick="toggleCard('signed_blocks_today_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.signed_blocks_today }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-file-signature icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.first_signed_blocks %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="first_signed_blocks_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> first signed blocks</h6>
                                    <button type="button" class="btn" onclick="toggleCard('first_signed_blocks_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.first_signed_blocks }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-file-signature icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.first_signed_blocks_today %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="first_signed_blocks_today_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> first signed blocks today</h6>
                                    <button type="button" class="btn" onclick="toggleCard('first_signed_blocks_today_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.first_signed_blocks_today }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-file-signature icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.all_signed_blocks %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="all_signed_blocks_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> all signed blocks</h6>
                                    <button type="button" class="btn" onclick="toggleCard('all_signed_blocks_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.all_signed_blocks }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-file-signature icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.autocollect_status %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="autocollect_status_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> autocollect status</h6>
                                    <button type="button" class="btn" onclick="toggleCard('autocollect_status_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.autocollect_status }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-coins icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.blocks_today %}
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="blocks_today_{{ network_name }}">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> blocks today in network</h6>
                                <button type="button" class="btn" onclick="toggleCard('blocks_today_{{ network_name }}')">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                            </div>
                            <div class="card-body d-flex align-items-center">
                                <div class="card-inner">
                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.blocks_today }}</span>
                                </div>
                            </div>
                            <i class="fa-solid fa-cubes icon-container"></i>
                        </div>
                    </div>
                    {% endif %}
                    {% if network.current_block_reward %}
                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="current_block_reward_{{ network_name }}">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> current block reward</h6>
                                <button type="button" class="btn" onclick="toggleCard('current_block_reward_{{ network_name }}')">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                            </div>
                            <div class="card-body d-flex align-items-center">
                                <div class="card-inner">
                                    <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.current_block_reward }}</span>
                                </div>
                            </div>
                            <i class="fa-solid fa-dollar-sign icon-container"></i>
                        </div>
                    </div>
                    {% endif %}
                    {% if network.autocollect_rewards %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="autocollect_rewards_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> autocollect rewards</h6>
                                    <button type="button" class="btn" onclick="toggleCard('autocollect_rewards_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.autocollect_rewards }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-coins icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.all_rewards %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="all_rewards_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> All rewards</h6>
                                    <button type="button" class="btn" onclick="toggleCard('all_rewards_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.all_rewards }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-dollar-sign icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.rewards_today %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="rewards_today_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> rewards today</h6>
                                    <button type="button" class="btn" onclick="toggleCard('rewards_today_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.rewards_today }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-dollar-sign icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.all_sovereign_rewards %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="all_sovereign_rewards_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> all sovereign rewards</h6>
                                    <button type="button" class="btn" onclick="toggleCard('all_sovereign_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.all_sovereign_rewards }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-dollar-sign icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.sovereign_rewards_today %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="sovereign_rewards_today_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> sovereign rewards today</h6>
                                    <button type="button" class="btn" onclick="toggleCard('sovereign_rewards_today_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ network.sovereign_rewards_today }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-dollar-sign icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.token_price %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="token_price_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> token price</h6>
                                    <button type="button" class="btn" onclick="toggleCard('token_price_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <span class="fw-medium card-subtitle mb-2 text-body-secondary">${{ network.token_price }}</span>
                                    </div>
                                </div>
                                <i class="fa-solid fa-dollar-sign icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.fee_wallet_tokens %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="reward_wallet_information_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> reward wallet</h6>
                                    <button type="button" class="btn" onclick="toggleCard('reward_wallet_information_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex align-items-center">
                                    <div class="card-inner">
                                        <table class="tokens">
                                            {% for token, balance in network.fee_wallet_tokens.items() %}
                                            <tr>
                                                <td><span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ token }}</span></td>
                                                <td><span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ balance }}</span></td>
                                            </tr>
                                            {% endfor %}
                                        </table>
                                    </div>
                                </div>
                                <i class="fa-solid fa-wallet icon-container"></i>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.node_data.nodes %}
                        {% for node in network.node_data.nodes %}
                            {% if node.is_my_node and node.is_sovereign %}
                                {% if node.sovereign_wallet_tokens %}
                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="sovereign_wallet_information_{{ network_name }}">
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center">
                                                <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> sovereign wallet</h6>
                                                <button type="button" class="btn" onclick="toggleCard('sovereign_wallet_information_{{ network_name }}')">
                                                    <i class="fa-solid fa-plus"></i>
                                                </button>
                                            </div>
                                            <div class="card-body d-flex align-items-center">
                                                <div class="card-inner">
                                                    <table class="tokens">
                                                        {% for token, balance in node.sovereign_wallet_tokens.items() %}
                                                        <tr>
                                                            <td><span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ token }}</span></td>
                                                            <td><span class="fw-medium card-subtitle mb-2 text-body-secondary">{{ balance }}</span></td>
                                                        </tr>
                                                        {% endfor %}
                                                    </table>
                                                </div>
                                            </div>
                                            <i class="fa-solid fa-wallet icon-container"></i>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    {% if network.first_signed_blocks_dict and network.first_signed_blocks_dict | length >= 1 %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="first_signed_blocks_last_n_days_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> First signed blocks history</h6>
                                    <button type="button" class="btn" onclick="toggleCard('first_signed_blocks_last_n_days_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex">
                                        <canvas id="firstSignedBlocksChart_{{ network_name }}"></canvas>
                                </div>
                                    <ul class="nav justify-content-center">
                                        {% if network.first_signed_blocks_dict | length < 7 %}
                                        <li class="nav-item active" onclick="updateChart('firstSignedBlocksChart', {{ network.first_signed_blocks_dict | length }}, '{{ network_name }}'); setActive(this);">
                                            <span class="days_amount">{{ network.first_signed_blocks_dict | length }} days</span>
                                        </li>
                                        {% else %}
                                        <li class="nav-item active" onclick="updateChart('firstSignedBlocksChart', 7, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">7 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.first_signed_blocks_dict | length >= 14 %}
                                        <li class="nav-item" onclick="updateChart('firstSignedBlocksChart', 14, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">14 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.first_signed_blocks_dict | length >= 30 %}
                                        <li class="nav-item" onclick="updateChart('firstSignedBlocksChart', 30, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">30 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.first_signed_blocks_dict | length >= 60 %}
                                        <li class="nav-item" onclick="updateChart('firstSignedBlocksChart', 60, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">60 days</span>
                                        </li>
                                        {% endif %}
                                    </ul>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.all_signed_blocks_dict and network.all_signed_blocks_dict | length >= 1 %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="all_signed_blocks_last_n_days_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> All signed blocks history</h6>
                                    <button type="button" class="btn" onclick="toggleCard('all_signed_blocks_last_n_days_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex">
                                        <canvas id="signedBlocksChart_{{ network_name }}"></canvas>
                                </div>
                                    <ul class="nav justify-content-center">
                                        {% if network.all_signed_blocks_dict | length < 7 %}
                                        <li class="nav-item active" onclick="updateChart('signedBlocksChart', {{ network.all_signed_blocks_dict | length }}, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">{{ network.all_signed_blocks_dict | length }} days</span>
                                        </li>
                                        {% else %}
                                        <li class="nav-item active" onclick="updateChart('signedBlocksChart', 7, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">7 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.all_signed_blocks_dict | length >= 14 %}
                                        <li class="nav-item" onclick="updateChart('signedBlocksChart', 14, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">14 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.all_signed_blocks_dict | length >= 30 %}
                                        <li class="nav-item" onclick="updateChart('signedBlocksChart', 30, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">30 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.all_signed_blocks_dict | length >= 60 %}
                                        <li class="nav-item" onclick="updateChart('signedBlocksChart', 60, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">60 days</span>
                                        </li>
                                        {% endif %}
                                    </ul>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.rewards and network.rewards | length >= 1 %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="rewards_last_n_days_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> Rewards history</h6>
                                    <button type="button" class="btn" onclick="toggleCard('rewards_last_n_days_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex">
                                        <canvas id="rewardsChart_{{ network_name }}"></canvas>
                                </div>
                                    <ul class="nav justify-content-center">
                                        {% if network.rewards | length < 7 %}
                                        <li class="nav-item active" onclick="updateChart('rewardsChart', {{ network.rewards | length }}, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">{{ network.rewards | length }} days</span>
                                        </li>
                                        {% else %}
                                        <li class="nav-item active" onclick="updateChart('rewardsChart', 7, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">7 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.rewards | length >= 14 %}
                                        <li class="nav-item" onclick="updateChart('rewardsChart', 14, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">14 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.rewards | length >= 30 %}
                                        <li class="nav-item" onclick="updateChart('rewardsChart', 30, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">30 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.rewards | length >= 60 %}
                                        <li class="nav-item" onclick="updateChart('rewardsChart', 60, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">60 days</span>
                                        </li>
                                        {% endif %}
                                    </ul>
                            </div>
                        </div>
                    {% endif %}
                    {% if network.sovereign_rewards and network.sovereign_rewards | length >= 1 %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-id="sovereign_rewards_last_n_days_{{ network_name }}">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="card-title text-uppercase"><span class="highlight">{{ network_name }}</span> sovereign rewards history</h6>
                                    <button type="button" class="btn" onclick="toggleCard('rewards_last_n_days_{{ network_name }}')">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body d-flex">
                                        <canvas id="sovereignRewardsChart_{{ network_name }}"></canvas>
                                </div>
                                    <ul class="nav justify-content-center">
                                        {% if network.sovereign_rewards | length < 7 %}
                                        <li class="nav-item active" onclick="updateChart('sovereignRewardsChart', {{ network.sovereign_rewards | length }}, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">{{ network.sovereign_rewards | length }} days</span>
                                        </li>
                                        {% else %}
                                        <li class="nav-item active" onclick="updateChart('sovereignRewardsChart', 7, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">7 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.sovereign_rewards | length >= 14 %}
                                        <li class="nav-item" onclick="updateChart('sovereignRewardsChart', 14, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">14 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.sovereign_rewards | length >= 30 %}
                                        <li class="nav-item" onclick="updateChart('sovereignRewardsChart', 30, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">30 days</span>
                                        </li>
                                        {% endif %}
                                        {% if network.sovereign_rewards | length >= 60 %}
                                        <li class="nav-item" onclick="updateChart('sovereignRewardsChart', 60, '{{ network_name }}'); setActive(this);">
                                            <span class="fw-medium days_amount">60 days</span>
                                        </li>
                                        {% endif %}
                                    </ul>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>
        {% if general_info.current_plugin_version %}
            <div class="row text-center">
                <span class="fw-medium small">{{ general_info.current_plugin_version}}</span>
            </div>
        {% endif %}
    </div>

    <script defer>
        const customView = document.getElementById('custom_view');
        const availableCards = document.getElementById('available_cards');
        const editViewBtn = document.getElementById('edit_view_button');

        const updateLocalStorage = () => {
            const customViewCards = Array.from(customView.children).map(card => card.dataset.id);
            localStorage.setItem('customViewLayout', JSON.stringify(customViewCards));
        };

        const toggleVisibility = () => {
            const isVisible = availableCards.classList.contains('visibility-visible');
            availableCards.classList.toggle('visibility-visible', !isVisible);
            availableCards.classList.toggle('visibility-hidden', isVisible);
            availableCardsSortable.option('disabled', isVisible);

            const icon = editViewBtn.querySelector('i');
            icon.classList.toggle('add_icon', isVisible);
            icon.classList.toggle('add_icon_disabled', !isVisible);
        };

        const toggleCard = (cardId) => {
            const card = document.querySelector(`[data-id="${cardId}"]`);
            const isInCustomView = card.parentNode === customView;
            const targetContainer = isInCustomView ? availableCards : customView;
            card.parentNode.removeChild(card);
            targetContainer.appendChild(card);

            const icon = card.querySelector('button i');
            icon.classList.toggle('fa-plus', isInCustomView);
            icon.classList.toggle('fa-minus', !isInCustomView);

            updateLocalStorage();
            checkAvailableCards();
        };

        const checkAvailableCards = () => {
            editViewBtn.style.display = availableCards.children.length === 0 ? 'none' : 'block';
        };

        const initializeSortable = (element, disabled = false) => {
            return new Sortable(element, {
                group: 'shared',
                animation: 150,
                delay: 150,
                delayOnTouchOnly: true,
                onStart(evt) {
                },
                onAdd(evt) {
                    const cardId = evt.item.dataset.id;
                    toggleCard(cardId);
                    updateLocalStorage();
                    checkAvailableCards();
                },
                onRemove(evt) {
                    const cardId = evt.item.dataset.id;
                    toggleCard(cardId);
                    updateLocalStorage();
                    checkAvailableCards();
                },
                onEnd() {
                    updateLocalStorage();
                    checkAvailableCards();
                },
                disabled: disabled,
                handle: '.card-header',
                filter: '.available_cards_heading',
            });
        };

        const savedLayout = JSON.parse(localStorage.getItem('customViewLayout')) || [];
        savedLayout.forEach(cardId => {
            const card = availableCards.querySelector(`[data-id="${cardId}"]`);
            if (card) customView.appendChild(card);
        });

        const customViewSortable = initializeSortable(customView);
        const availableCardsSortable = initializeSortable(availableCards, true);

        editViewBtn.addEventListener('click', toggleVisibility);

        document.querySelectorAll('#custom_view .fa-plus').forEach(icon => {
            icon.classList.replace('fa-plus', 'fa-minus');
        });

        checkAvailableCards();

        function formatDate(dateString) {
            var date = new Date(dateString);
            return date.toLocaleDateString(undefined, {
                month: 'numeric',
                day: 'numeric'
            });
        }

        function setActive(selectedItem) {
                var parentCard = selectedItem.closest('.card');
                var navItems = parentCard.querySelectorAll('.nav-item');
                navItems.forEach(function(item) {
                    item.classList.remove('active');
                });
                selectedItem.classList.add('active');
        }
    </script>
    <script defer>
        {% include 'cards/charts.js' %}
    </script>
</body>
</html>
